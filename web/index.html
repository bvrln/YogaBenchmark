<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Yoga Club Benchmark Map</title>
  <link rel="stylesheet" href="styles.css?v=20260118" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
</head>

<body>
  <div class="page">
    <header class="masthead">
      <h1>Yoga Club Benchmark - Amsterdam</h1>
      <p class="tagline">Local view of the market (early 2000s vibes).</p>
    </header>

    <main class="layout">
      <section class="map-panel">
        <div id="map" class="map-frame" aria-label="Map with studio and competitor pins"></div>
        <div class="map-caption">Map area: De Pijp - Centrum - Oud-West</div>

        <div class="card benchmark-card">
          <h3>Competitor Benchmark (Selected vs Market)</h3>
          <table class="offers">
            <thead>
              <tr>
                <th>Player</th>
                <th>Offer Type</th>
                <th>Class Type</th>
                <th>Length</th>
                <th>Heat</th>
                <th>Selected</th>
                <th>Market Median</th>
                <th>Delta</th>
              </tr>
            </thead>
            <tbody id="competitor-benchmark-body"></tbody>
          </table>
        </div>

        <div class="card benchmark-card">
          <h3>Market Benchmark - Like-for-Like Price per Class</h3>
          <table class="offers">
            <thead>
              <tr>
                <th>Offer Type</th>
                <th>Class Type</th>
                <th>Length</th>
                <th>Heat</th>
                <th>Min</th>
                <th>Median</th>
                <th>Max</th>
                <th>Count</th>
              </tr>
            </thead>
            <tbody id="benchmark-body"></tbody>
          </table>
        </div>

      </section>

      <aside class="info-panel">
        <!-- Pricing Dashboard Card -->
        <div class="card insights-card">
          <div id="pricing-recommendations"></div>
        </div>

        <!-- Pricing Insights Card -->
        <div class="card insights-card">
          <h2>💡 Pricing Insights</h2>
          <div id="insights-container">
            <p class="note">Select competitors to see pricing recommendations</p>
          </div>
        </div>

        <!-- Filters Card -->
        <div class="card">
          <h3>🔍 Find Competitors</h3>
          <div class="filter-section">
            <div class="filter-row">
              <label class="filter-label">Search:</label>
              <input type="text" id="search-input" class="search-input" placeholder="Studio name or location..." />
            </div>
            <div class="filter-row">
              <label class="filter-label">Tier:</label>
              <select id="tier-filter" class="filter-select">
                <option value="all">All Tiers</option>
                <option value="Tier 1">Tier 1 (Walk)</option>
                <option value="Tier 2">Tier 2 (Bike)</option>
                <option value="Tier 3">Tier 3 (Regional)</option>
              </select>
              <label class="filter-label" style="margin-left: 10px;">Segment:</label>
              <select id="segment-filter" class="filter-select">
                <option value="all">All Segments</option>
                <option value="hot yoga">Hot Yoga</option>
                <option value="boutique">Boutique</option>
                <option value="studio">Studio</option>
                <option value="gym chain">Gym Chain</option>
              </select>
            </div>
            <div class="filter-row">
              <label>
                <input type="checkbox" id="comparable-only" />
                Show only comparable offers (≥85%)
              </label>
              <button id="reset-filters" class="btn" style="margin-left: auto;">Reset Filters</button>
            </div>
            <div id="filter-status" class="note" style="margin-top: 8px;"></div>
          </div>
        </div>

        <!-- Top Comparable Competitors Widget -->
        <div class="card">
          <h3>⭐ Top Comparable Competitors</h3>
          <p class="note">Best matches for Movement's Yoga based on class types, heat, and offerings</p>
          <div id="top-competitors-list">
            <p class="note">Loading recommendations...</p>
          </div>
          <button id="pin-top-competitors" class="btn btn-primary" style="width: 100%; margin-top: 10px;">
            📌 Pin Top 5 Competitors
          </button>
        </div>

        <div class="card">
          <h2 id="own-name">Movement's Yoga</h2>
          <p class="meta" id="own-meta">Studios - Amsterdam</p>
          <p id="own-proposition">
            Boutique hot yoga and pilates studios with heated rooms and premium instruction.
          </p>
          <ul class="pricing" id="own-packages">
            <li>Drop-in: EUR 25</li>
            <li>10-class card: EUR 175</li>
            <li>Unlimited: EUR 199 / 28 days</li>
          </ul>
          <p class="note" id="own-source"></p>
        </div>

        <div class="card">
          <h3>Competitor Deep Dive</h3>
          <div id="competitor-detail" class="detail-box">
            <p>Select a competitor to see details and offers.</p>
          </div>
          <table class="offers">
            <thead>
              <tr>
                <th>Offer</th>
                <th>Type</th>
                <th>Class</th>
                <th>Length</th>
                <th>Sessions</th>
                <th>Period</th>
                <th>Visits/Wk</th>
                <th>Visits/Mo</th>
                <th>Price</th>
                <th>Per Visit</th>
              </tr>
            </thead>
            <tbody id="competitor-offers-body"></tbody>
          </table>
        </div>

        <div class="card">
          <h3>Competitor List</h3>
          <p class="note">Pin up to 10 key competitors to keep them on top and focus refresh searches.</p>
          <div class="refresh-row">
            <button id="refresh-pricing" class="pin-button">Refresh pricing for pinned</button>
            <span id="refresh-status" class="note">Pricing refresh: idle</span>
          </div>
          <table class="offers">
            <thead>
              <tr>
                <th>Pin</th>
                <th>Studio</th>
                <th>Tier</th>
                <th>Distance</th>
                <th>Type</th>
              </tr>
            </thead>
            <tbody id="competitors-body"></tbody>
          </table>
        </div>

        <div class="card">
          <h3>Competitors & Offers</h3>
          <table class="offers">
            <thead>
              <tr>
                <th>Studio</th>
                <th>Tier</th>
                <th>Offer</th>
                <th>Price</th>
              </tr>
            </thead>
            <tbody id="offers-body"></tbody>
          </table>
        </div>
      </aside>
    </main>

    <footer class="footer">
      <span>Data source: manual + web research helper</span>
      <span id="status-line">Status: loading...</span>
    </footer>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script>
    (function () {
      const statusLineEl = document.getElementById("status-line");
      if (statusLineEl) {
        statusLineEl.textContent = "Status: Leaflet " + (typeof L === "undefined" ? "missing" : "loaded");
      }
    })();
  </script>
  <script src="app.js?v=20260118"></script>
  <script src="app.js?v=20260118"></script>
  <script src="filters.js?v=20260202"></script>`n  \u003cscript src="pricing_dashboard.js?v=20260202"\u003e\u003c/script\u003e
    (function () {
      const appLoaded = Boolean(window.__app_js_loaded);
      if (!appLoaded) {
        const statusLineEl = document.getElementById("status-line");
        if (statusLineEl) {
          statusLineEl.textContent = "Status: app.js failed to load or execute";
        }
      }
    })();
  </script>
</body>

</html>
