<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Movement's Yoga - Market Benchmark</title>
  <link rel="stylesheet" href="styles.css?v=20260202" />
  <link rel="stylesheet" href="tab-styles.css?v=20260202" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
</head>

<body>
  <div class="page">
    <header class="masthead">
      <h1>Movement's Yoga - Market Benchmark</h1>
      <p class="tagline">Competitive intelligence for hot yoga in Amsterdam</p>
    </header>

    <!-- Tab Navigation -->
    <nav class="tabs">
      <button class="tab active" data-tab="mystudio">🏠 My Studio</button>
      <button class="tab" data-tab="benchmark">📊 Competitive Benchmark</button>
    </nav>

    <main class="tab-content">
      <!-- My Studio Tab -->
      <div id="mystudio-panel" class="tab-panel active">
        <div class="overview-grid">
          <div class="card">
            <h2>📍 Movement's Yoga</h2>
            <div id="own-studio-info">
              <p class="loading">Loading studio information...</p>
            </div>
          </div>

          <div class="card">
            <h2>📈 Quick Stats</h2>
            <div id="quick-stats">
              <p class="loading">Loading stats...</p>
            </div>
          </div>
        </div>

        <div class="card">
          <h2>💰 Pricing Dashboard</h2>
          <div id="pricing-recommendations"></div>
        </div>

        <div class="card">
          <h2>💡 Pricing Insights</h2>
          <div id="insights-container">
            <p class="note">Pricing insights based on market analysis</p>
          </div>
        </div>
      </div>

      <!-- Competitive Benchmark Tab -->
      <div id="benchmark-panel" class="tab-panel">
        <div class="layout">
          <section class="map-panel">
            <div id="map" class="map-frame" aria-label="Map with studio and competitor pins"></div>
            <div class="map-caption">Map area: De Pijp - Centrum - Oud-West</div>

            <div class="card benchmark-card">
              <h3>Competitor Benchmark (Selected vs Market)</h3>
              <table class="offers">
                <thead>
                  <tr>
                    <th>Player</th>
                    <th>Offer Type</th>
                    <th>Class Type</th>
                    <th>Length</th>
                    <th>Heat</th>
                    <th>Selected</th>
                    <th>Market Median</th>
                    <th>Delta</th>
                  </tr>
                </thead>
                <tbody id="competitor-benchmark-body"></tbody>
              </table>
            </div>

            <div class="card benchmark-card">
              <h3>Market Benchmark - Like-for-Like Price per Class</h3>
              <table class="offers">
                <thead>
                  <tr>
                    <th>Offer Type</th>
                    <th>Class Type</th>
                    <th>Length</th>
                    <th>Heat</th>
                    <th>Min</th>
                    <th>Median</th>
                    <th>Max</th>
                    <th>Count</th>
                  </tr>
                </thead>
                <tbody id="benchmark-body"></tbody>
              </table>
            </div>
          </section>

          <aside class="info-panel">
            <!-- Filters Card -->
            <div class="card">
              <h3>🔍 Filters</h3>
              <div class="filter-group">
                <label for="search-input">Search:</label>
                <input type="text" id="search-input" class="search-input" placeholder="Studio name..." />
              </div>
              <div class="filter-group">
                <label for="tier-filter">Tier:</label>
                <select id="tier-filter" class="filter-select">
                  <option value="">All Tiers</option>
                  <option value="Tier 1">Tier 1</option>
                  <option value="Tier 2">Tier 2</option>
                  <option value="Tier 3">Tier 3</option>
                </select>
              </div>
              <div class="filter-group">
                <label for="segment-filter">Segment:</label>
                <select id="segment-filter" class="filter-select">
                  <option value="">All Segments</option>
                  <option value="yoga studio">Yoga Studio</option>
                  <option value="fitness club">Fitness Club</option>
                  <option value="pilates studio">Pilates Studio</option>
                </select>
              </div>
            </div>

            <!-- Top Competitors Widget -->
            <div class="card">
              <h3>🏆 Top Comparable Competitors</h3>
              <div id="top-competitors-widget"></div>
            </div>

            <!-- Competitor Deep Dive -->
            <div class="card">
              <h3>🔬 Competitor Deep Dive</h3>
              <div id="competitor-detail" class="detail-box">
                <p>Select a competitor to see details and offers.</p>
              </div>
              <table class="offers">
                <thead>
                  <tr>
                    <th>Offer</th>
                    <th>Type</th>
                    <th>Class</th>
                    <th>Length</th>
                    <th>Sessions</th>
                    <th>Period</th>
                    <th>Price</th>
                    <th>Per Visit</th>
                  </tr>
                </thead>
                <tbody id="competitor-offers-body"></tbody>
              </table>
            </div>

            <!-- Competitor List -->
            <div class="card">
              <h3>Competitor List</h3>
              <p class="note">Pin up to 10 key competitors to keep them on top and focus refresh searches.</p>
              <div class="refresh-row">
                <button id="refresh-pricing" class="pin-button">Refresh pricing for pinned</button>
                <span id="refresh-status" class="note">Pricing refresh: idle</span>
              </div>
              <table class="offers">
                <thead>
                  <tr>
                    <th>Pin</th>
                    <th>Studio</th>
                    <th>Tier</th>
                    <th>Segment</th>
                    <th>Distance</th>
                  </tr>
                </thead>
                <tbody id="competitor-list-body"></tbody>
              </table>
            </div>

            <!-- All Competitors & Offers -->
            <div class="card">
              <h3>Competitors & Offers</h3>
              <table class="offers">
                <thead>
                  <tr>
                    <th>Studio</th>
                    <th>Tier</th>
                    <th>Offer</th>
                    <th>Type</th>
                    <th>Class</th>
                    <th>Heat</th>
                    <th>Length</th>
                    <th>Sessions</th>
                    <th>Duration</th>
                    <th>Price</th>
                    <th>Per Class</th>
                  </tr>
                </thead>
                <tbody id="all-offers-body"></tbody>
              </table>
            </div>
          </aside>
        </div>
      </div>
    </main>

    <footer class="footer">
      <span>Data source: manual + web research helper</span>
      <span id="status-line">Status: loading...</span>
    </footer>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script>
    (function () {
      const statusLineEl = document.getElementById("status-line");
      if (statusLineEl) {
        statusLineEl.textContent = "Status: Leaflet " + (typeof L === "undefined" ? "missing" : "loaded");
      }
    })();
  </script>
  <script src="app.js?v=20260202"></script>
  <script src="pricing_dashboard.js?v=20260202"></script>
  <script src="filters.js?v=20260202"></script>
  <script src="tabs.js?v=20260202"></script>
  <script>
    (function () {
      const appLoaded = Boolean(window.__app_js_loaded);
      if (!appLoaded) {
        const statusLineEl = document.getElementById("status-line");
        if (statusLineEl) {
          statusLineEl.textContent = "Status: app.js failed to load or execute";
        }
      }
    })();
  </script>
</body>

</html>